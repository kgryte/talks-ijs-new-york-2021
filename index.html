<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<title>Faster than NumPy | Talk | iJS New York, 2021</title>

	<meta name="description" content="NumPy is a foundational component of the PyData ecosystem, providing a high-performance numerical library on which countless image processing, machine learning, and data analytics tools are built in Python. Is it possible to bring the same power, performance, and robustness to JavaScript? In this talk, I’ll discuss our journey in trying to build such a library. I’ll dive deep into the weeds of performance profiling, hidden classes, cache-oblivious iteration, hardware optimization, and much more. I’ll show benchmarks showcasing how well JavaScript stacks up against the competition. And I’ll conclude by discussing where we go from here. So is it possible? Come to my talk to find out, as the answer may surprise you.">
	<meta name="author" content="Athan Reines">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<!-- Icons -->
	<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="manifest" href="manifest.json">
	<link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
	<meta name="theme-color" content="#ffffff">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="fonts/lato/latin/lato_light.css">
	<link rel="stylesheet" href="fonts/libre-baskerville/libre_baskerville.css">
	<link rel="stylesheet" href="fonts/font-awesome/fontawesome.css">

	<link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css">
	<link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
	<link rel="stylesheet" href="node_modules/reveal.js/dist/theme/simple.css">
	<link rel="stylesheet" href="node_modules/reveal.js-appearance/plugin/appearance/appearance.css">
	<link rel="stylesheet" href="css/highlight.css">
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" href="css/main.css">
</head>
<body>
	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides">

			<section id="conf-splash" data-background-transition="slide" data-background-image="img/conf_splash.png">
				<aside class="notes">
					(next slide)
				</aside>
			</section>

			<section id="title-slide" data-transition="slide-in fade-out" data-background-image="img/splash/cheetah_1920x1280.jpg">

				<div class="grid">
					<h1 class="fragment title"><span class="animated skidRightBig">Faster than NumPy</span></h1>
					<h2 class="fragment subtitle"><span class="animated skidRightBig">High-performance numerical computation in JavaScript</span></h2>
				</div>

				<aside class="notes">
					<p>
						Hello and welcome to my talk! I'm Athan Reines, and, today, I'll be presenting <strong>Faster than NumPy: High-performance numerical computation in JavaScript</strong>.
				</aside>
			</section>

			<section id="about-me-splash-slide" data-transition="fade-in slide-out" data-background-image="img/splash/golden_gate_bridge.jpg">

				<div class="grid">
					<h1 class="title"><span class="animated fadeIn" data-delay="500">About me.</span></h1>
				</div>

				<aside class="notes">
					<p>
						Before we begin, I want to provide a brief overview of my background to help motivate this talk and to provide a rationale for why you should even listen to me in the first place.
					</p>
				</aside>
			</section>

			<section id="about-me-slide">

				<div class="grid">
					<div class="fragment">
						<a href="https://www.quansight.com/"><img class="animated flipInX" data-src="img/quansight_logo.png" alt="Quansight" class="undecorated" height="70%" width="70%"></a>
					</div>

					<div class="fragment">
						<a href="https://labs.quansight.org/"><img class="animated flipInX" data-src="img/quansight_labs_logo.png" alt="Quansight Labs" class="undecorated" width="70%"></a>
					</div>

					<div class="fragment">
						<a href="https://data-apis.org/"><img class="animated flipInX" data-src="img/data_apis_logo.svg" alt="Data APIs" class="undecorated" height="40%" width="40%"></a>
					</div>

					<div class="fragment">
						<a href="https://stdlib.io/docs/api/latest"><img class="animated flipInX" data-src="img/stdlib_logo_banner.svg" alt="stdlib" class="undecorated"></a>
					</div>
				</div>

				<aside class="notes">
					<p>
						I work for Quansight, a software consulting company cofounded by Travis Oliphant, the primary original author of NumPy and founding contributor to SciPy.
					</p>
					<p>
						Quansight acts as an intermediary between companies and the open source ecosystems on which those companies depend. Most of the in-house expertise, and thus the consulting work, centers around the PyData stack: NumPy, SciPy, Numba, Dask, PyData Sparse, pandas, Jupyter, conda, and others.
					</p>
					<p>
						(next fragment)
					</p>
					<p>
						Under the same corporate umbrella as Quansight is the public benefit division Quansight Labs which consists of the developers, community managers, designers, and writers who actually create and maintain the open-source technologies mentioned earlier.
					</p>
					<p>
						(next fragment)
					</p>
					<p>
						The majority of my work at Quansight is as part of the Consortium for Python Data API standards, which is a Quansight Labs led initiative to develop API standards for array and dataframe libraries within the PyData ecosystem.
					</p>
					<p>
						The Consortium brings together core maintainers from NumPy, CuPy, Dask, Torch, TensorFlow, Apache Arrow, and others in order to create hardware agnostic specifications for commonly used APIs to facilitate interoperability between array and dataframe libraries and reduce ecosystem fragmentation.
					</p>
					<p>
						(next fragment)
					</p>
					<p>
						Also, as part of my work, I am a core maintainer of the open-source project, <a href="https://stdlib.io/docs/api/latest">stdlib</a>, a standard library for JavaScript and Node.js.
					</p>
					<p>
						One of the foremost goals of stdlib is to provide the equivalent of NumPy and SciPy for <strong>numerical</strong> and <strong>scientific</strong> computing applications on the web and in Node.js.
					</p>
					<p>
						Most of my work on stdlib focuses on developing APIs for high-performance numerical operations on multi-dimensional arrays in JavaScript and C--the precise subject of this talk. :)
					</p>
				</aside>
			</section>

			<section id="numpy-splash-slide" data-transition="slide-in fade-out">
				<div class="background middle-stripe-background"></div>
				<div class="grid">
					<img class="animated fadeIn slow" data-delay="500" data-src="img/numpy_logo.svg" href="NumPy logo">
				</div>

				<aside class="notes">
					<p>
						Given that this is a JavaScript conference and I don't want to assume that everyone attending this talk knows Python and is familiar with the PyData numerical computing landscape, I'd like to begin our discussion by providing a high-level introduction to NumPy and array computing.
					</p>
				</aside>
			</section>

			<section id="numpy-slide" data-transition="fade-in fade-out">

				<div class="background-wrap">
					<div class="background polygon-background-1"></div>
				</div>
				<div class="grid">
					<p class="fragment fade-in-then-out">
						<span class="animated fadeIn slow" data-delay="500">
							CPU-based library for performing numerical computation on multidimensional arrays.
						</span>
					</p>
					<p class="fragment">
						<span class="animated fadeIn" data-delay="500">
							ndarray
						</span>
					</p>
				</div>

				<aside class="notes">
					<p>
						(fragment)
					</p>
					<p>
						Originally written in 2005, NumPy is a CPU-based library for performing numerical computation on multidimensional arrays.
					</p>
					<p>
						Without the assistance of a multi-process library, NumPy operations are blocking, running on a single-core and executing synchronously in sequential order.
					</p>
					<p>
						I should note that NumPy is able to leverage parallelism through SIMD operations, depending on host architecture and compilation.
					</p>
					<p>
						However--and this is relevant for later discussion--while other libraries exist to address limitations in NumPy--for example, through the use of GPUs (CuPy), GPUs/TPUs (Torch/TensorFlow), or distributed computation (Dask), NumPy does not, by itself, enjoy any inherit advantages compared to a comparable library written in JavaScript by virtue of being written in and for Python.
					</p>
					<p>
						The same issues, such as single-threading and limited host memory, that are seen as limitations in JavaScript apply equally to Python, and thus NumPy, as well.
					</p>
					<p>
						(fragment)
					</p>
					<p>
						The fundamental building block of NumPy is the <code>ndarray</code>, which is a data structure for describing multidimensional arrays.
					</p>
				</aside>
			</section>

			<section id="ndarray-use-cases-splash-slide" data-background-image="img/splash/keyboard.jpg" data-transition="fade-in fade-out" data-transition-speed="fast">

				<div class="background-wrap">
					<div class="background right-trapezoid-background"></div>
				</div>
				<div class="grid">
					<h1>Demos</h1>
				</div>

				<aside class="notes">
					<p>
						To help motivate why <code>ndarrays</code> are so useful, I'd like to start with a few demos of web applications which are using <code>ndarray</code> data structures to perform various computational tasks.
					</p>
				</aside>
			</section>

			<section id="falcon-demo-slide" data-transition="fade-in fade-out">

				<iframe data-src="https://vega.github.io/falcon/flights/"></iframe>

				<aside class="notes">
					<p>
						The first demo is Falcon, a library for high-performance cross-filtering of large datasets directly in the browser.
					</p>
					<p>
						What is shown is a collection of histograms visualizing different facets of a 1 million flight dataset.
					</p>
					<p>
						Internally, Falcon is using an ndarray data structure to aggregate and bin the flight data in real-time as a user interacts with the graph brushes.
					<p>
						(play with brushes and demonstrate responsiveness)
					</p>
				</aside>
			</section>

			<section id="mikola-voxel-demo-slide" data-transition="fade-in fade-out">

				<iframe data-src="https://mikolalysenko.github.io/voxel-mipmap-demo/"></iframe>

				<aside class="notes">
					<p>
						The second demo is a project by Mikola Lysenko, which provides an interactive application for demonstrating texture mapping.
					</p>
					<p>
						Internally, Mikola uses ndarrays for processing the voxel data and creating meshes.
					</p>
					<p>
						(select a few examples from the dropdown and interact with one or two of the rendered objects)
					</p>
				</aside>
			</section>

			<section id="regl-cnn-demo-slide" data-transition="fade-in fade-out">

				<iframe data-src="https://erkaman.github.io/regl-cnn/src/demo.html"></iframe>

				<aside class="notes">
					<p>
						The third demo is a project by one of the regl developers demonstrating the application of convolutional neural network to handwritten digit recognition.
					</p>
					<p>
						Internally, this demo uses ndarrays for implementing the convolutional neural network and performing various tensor operations.
					</p>
					<p>
						(draw a few digits)
					</p>
				</aside>
			</section>

			<section id="tensorflow-pacman-demo-slide" data-transition="fade-in fade-out">

				<iframe data-src="https://storage.googleapis.com/tfjs-examples/webcam-transfer-learning/dist/index.html"></iframe>

				<aside class="notes">
					<p>
						The next demo comes from the TensorFlow.js team.
					</p>
					<p>
						Similar to NumPy, ndarrays are the fundamental data structure in TensorFlow.js.
					</p>
					<p>
						In this demo--which I won't play because I'm already using my web cam for this talk--one can train a neural network directly in the browser to recognize gestures in order to control pac man as he navigates a maze.
					</p>
				</aside>
			</section>

			<!-- TODO: additional demos of ndarray use cases? -->

			<section id="multidimensional-array-splash-slide" data-transition="fade-in fade-out">

				<!-- TODO -->

				<aside class="notes">
					<p>
						But what is a multi-dimensional array?
					</p>
					<p>
						Most of us will have a working understanding of multi-dimensional arrays, often within the context of a list of lists (or an array of arrays in JavaScript).
					</p>
					<p>
						(next slide)
					</p>
				</aside>
			</section>

			<section id="array-of-arrays-slide" data-transition="fade-in">
				<div class="grid">

					<div class="code">
						<pre><code class="language-javascript" data-trim data-line-numbers="1-5|7-9|11-13|15-17">
arr = [
	[ 1, 2, 3 ],
	[ 4, 5, 6 ],
	[ 7, 8, 9 ]
];

// Get individual item:
v = arr[1][1];
// returns 5

// Get row:
row = arr[1];
// returns [ 4, 5, 6 ]

// Get column: (!!!)
col = [ arr[0][1], arr[1][1], arr[2][1] ];
// returns [ 2, 5, 8 ]
						</code></pre>
					</div>

					<div class="text">
						<p class="fragment">
							Let \( n \) be the number of elements in the innermost dimension and \( d \) be the number of dimensions.
						</p>
						<ul>
							<li class="fragment">\( O(d) \) &mdash; data access</li>
							<li class="fragment">\( O(nd^d) \) &mdash; traversal</li>
							<li class="fragment">\( O(n^{d-1}) \) &mdash; storage requirements</li>
						</ul>
					</div>

				</div>

				<aside class="notes">
					<p>
						Most of us are TODO
					</p>
					<p>
						(fragment)
					</p>
					<p>

					</p>
					<p>
						(dereferencing)
					</p>
					<p>

					</p>
					<p>
						(intermediate arrays containing pointers)
					</p>
				</aside>
			</section>

			<section id="ndarray-conceptual-diagram-slide" data-transition="fade-in slide-out">

				<!-- TODO: make this schematic an animation using D3 -->

				<div class="grid">
					<div class="fragment">
						<img class="animated fadeIn slow" data-src="img/ndarray_schematic.svg" data-delay="500">
					</div>
				</div>
				<aside class="notes">
					<p>
						TODO: describe NumPy ndarray conceptual diagram
					</p>
					<p>
						An ndaray is collection of "items" having the same data type.
					</p>
					<p>
						An ndarray is a <strong>homogeneous</strong> data structure, in which every item occupies a memory block of the same size, and in which all blocks are interpreted in exactly the same way.
					</p>
					<p>
						How each item in the array is to be interpreted is specified by a separate data-type object.
					</p>
				</aside>
			</section>

			<section>
				<aside class="notes">
					(next slide)
				</aside>
			</section>

			<section id="thank-you-slide" data-transition="fade-in slide-out" data-background-image="img/splash/mountains_with_fog_1920x1280.jpg">
				<div class="grid">
					<div class="content">
						<h1><span class="animated fadeIn slow" data-delay="500">Thank you.</span></h1>
						<nav class="author-links">
							<ul class="animated fadeIn slow" data-delay="1000">
								<li>
									<a href="https://github.com/kgryte"><i class="fa fa-github"></i> Athan Reines</a>
								</li>
								<li>
									<a href="https://twitter.com/kgryte"><i class="fa fa-twitter"></i> @kgryte</a>
								</li>
								<li>
									<a href="https://twitter.com/stdlibjs"><i class="fa fa-twitter"></i> @stdlibjs</a>
								</li>
							</ul>
						</nav>
					</div>
				</div>

				<aside class="notes">
					<p>
						Thank you for attending this talk. I hope it has been informative. :)
					</p>
					<p>
						If you want to know more, you can find me on <a href="https://github.com/kgryte">GitHub</a> and Twitter.
					</p>
					<p>
						I'm happy to take any questions at this time.
					</p>
				</aside>
			</section>

		</div> <!-- /.slides -->
	</div> <!-- /.reveal -->

	<script src="node_modules/reveal.js/dist/reveal.js"></script>
	<script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
	<script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
	<script src="node_modules/reveal.js/plugin/search/search.js"></script>
	<script src="node_modules/reveal.js/plugin/math/math.js"></script>
	<script src="node_modules/reveal.js-appearance/plugin/appearance/appearance.js"></script>
	<script>
		Reveal.initialize({
			// Hide the controls:
			'controls': false,

			// Show slide numbers in the speaker view:
			'showSlideNumber': 'speaker',

			// Add the current slide number to the URL hash so that reloading the page/copying the URL will return you to the same slide:
			'hash': true,

			// Only use left/right arrows to navigate slides:
			'navigationMode': 'linear',

			// Hide the presentation progress bar:
			'progress': false,

			// Disable the default layout (scaling and centering):
			'disableLayout': true,

			// Disable vertical centering:
			'center': false,

			// Specify the default transition style:
			'transition': 'slide',

			// Configure the Appearance plugin:
			'appearance': {
				// Display the elements when moving backward in the presentation:
				'hideagain': false
			},

			// Configure the plugin for rendering mathematical equations:
			'math': {
				'mathjax': '/node_modules/mathjax/es5/tex-mml-chtml.js',

				'config': 'TeX-AMS_HTML-full',

				'TeX': {
					'inlineMath': [
						[ '$', '$' ],
						[ '\\(', '\\)' ]
					]
				}
			},

			// Specify a list of plugins:
			'plugins': [
				// Syntax highlight code:
				RevealHighlight,

				// Enable speaker notes:
				RevealNotes,

				// Enable searching across slides via CTRL+SHIFT+F:
				RevealSearch,

				// Render mathematical equations:
				RevealMath,

				// Enable animations:
				Appearance
			]
		});
	</script>
	<script src="js/script.js"></script>
</body>
</html>
